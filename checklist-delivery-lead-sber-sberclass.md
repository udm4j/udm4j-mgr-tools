Чек лист delivery manager / PM
=======

Dev-lead-up / Подготовка к разработке
-----------

1. Определите участников команды со следующими ролями:
    * бизнес-архитектор,
    * [product Owner (PO)](https://confluence.pcbltools.ru/confluence/x/tZmAAg) / [БА](https://confluence.pcbltools.ru/confluence/x/-aGXAg),
    * дизайнер,
    * Системный аналитик,
    * разработчики BE/FE,
    * QA,
    * представитель команды сопровождения,
    * представитель информационной безопасности (ИБ),
    * технический архитектор.

2. Определите зоны ответственности каких команд затрагивает доработка.
    * Если речь про команды "внутри" кластера (под единым руководством), то сделать это можно проанализировав зоны ответственности на странице [Команды](https://confluence.pcbltools.ru/confluence/pages/viewpage.action?pageId=12716735). Если нескольких команд, то нужно создать в Jira тикеты с типом "Change Request" и назначить на PO/ITL ответственной команды. Необходимо показать эти тикеты PO/ITL и в явном виде получить от них обратную связь/согласование.
    * Если речь про команды "снаружи" кластера (команды других отделов/департаментов/компаний, например, VK), то найти представителя (аккаунт-менеджера) и поставить задачи через него.
   
3. Составить матрицу коммуникаций с конкретными ФИО и контактами (телефон + почта).
   
4. PO вместе с бизнес-аналитиком должны подготовить бизнес-требования к доработке. Definition of Done (DoD) для БТ:
    * указана проблематика и мотивация доработки: для чего нужна, какие проблемы она решает,
    * описаны сценарии использования,
    * зафиксированы критерии приёмки,
    * зафиксированы бизнес-метрики.
    
5. TL вместе с аналитиком должны разбить бизнес-требования на story.
    * Все story необходимо создать в jira и собрать в epic,
    * FixVersion для story необходимо выбирать ориентируясь на [календарь релизов](https://jira.pcbltools.ru/jira/secure/DoItBetterCalendar.jspa),
    * Если команда живёт по одной из agile-методологий, то оценка story должна укладываться в sprint.

6. Перед началом разработки story необходимо пройти набор условий [Definition Of Ready (DoR)](https://confluence.pcbltools.ru/confluence/x/k7EUAg). 
    * аналитик должен подготовить системные требования в соответствии с шаблоном. Системные требования должны включать макеты, согласованные с PO и командой, которая будет работать по story,
    * Сделать оценку этих story для всех этапов и участников процесса. В случае необходимости при оценке стоит:
        - Заложить оценку чистой разработки по всем пунктам плана (состав доработки),
        - Заложить оценку на аналитику (коэффициент 1,30) и тестирование (коэффициент 1.30),
        - Заложить отпуска, болезни и увольнения (коэффициент 1,15),
        - Заложить риски и неопределенности (коэффициент 2.0),
        - Заложить оценку интеграции с внешними системами (оценивать отдельно и очень осторожно),
        - Заложить еще 2 недели "сверху" (так как за 2 недели можно сделать все что угодно).
    * архитектор/techlead должны подготовить архитектуру решения и обновить архитектурные артефакты системы в целом  
    * Необходимо получить согласования от смежных команд на эту доработку,
    * Необходимо получить согласование от ИБ,   
    * Необходимо получить согласование от сопровождения.
   
7. Необходимо подумать о дополнительных расходах, которые могут потребоваться до, во время и после внедрения доработки:
    * (До)
        - железо: 
            * ноутбуки / АРМ, мониторы для разработчиков, 
            * iMac/планшеты/стилусы для дизайнеров,
            * телефоны/планшеты(android/ios) и другие устройства для тестирования,
            * КТС для дев стендов,
        - софт: 
            * IDE (лицензии), 
            * jira (+ zephyr, script runner)/confluence/jenkins/sonar/checkmarks/nexus/harbor/rancher или аналоги  
            * конфигурация АРМ, доступы в необходимые информационные системы,
            * xml/uml/bpmn и прочие редакторы для аналитиков/архитекторов/проектировщиков,
            * figma/miro/storybook для дизайнеров и РО,
            * browserstack для тестирования в разных средах,  
            * slack (или любое другое средство оперативной коммуникации),
        - остальное:
            * рабочие места, столы, стулья,
            * доступ в интернет (wifi, провода),
            * горячая еда 2-3 раза в день, холодные закуски,
        - команда разработки: 
            * найм,
    * (Во время)
        - КТС для stage и prod (+ георезерв) контуров,
        - Расширение команды сопровождения,
        - Мониторинг/Метрики,
            * почтовые провайдеры, 
            * смс провайдеры,
            * системы мониторинга и логирования (Splunk, EFK, Zabbix или аналоги),
        - Технические средства для пользователей 
            * железо: 
                - компы, ноутбуки, планшеты, мобильные устройства, 
                - роутеры для доставки интернета,
        - Информационная поддержка 
            * обучение, 
            * реклама, 
            * презентация, 
            * PR
    * (После)
            
8. Необходимо подготовить план реализации, внедрения и тиражирования функционала:
    * Предусмотреть вывод сервиса(-ов)/функционала за фича-флагом, 
    * Предусмотреть разработку, дебаг, работу, тестирование сервиса(-ов)/функционала локально, на дев/тест стендах, stage и prod средах
    * Подготовить [`план тестирования`](#Test-lead-up),  
    * Предусмотреть вывод сервиса(-ов)/функционала без необходимости вывода других сервисов,
    * Предусмотреть выход сервиса(-ов)/функционала без downtime,
    * Подготовить план отката сервиса(-ов)/функционала,
    * Предусмотреть перенос изменений во все необходимые ветки гита.
   
Ключевой критерий завершения подготовительного этапа: 
* собрана необходимая команда, 
* подготовлены необходимые артефакты, 
* у команды не осталось вопросов по задаче

Test-lead-up / Подготовка к тестированию
-----------

1. Подготовить окружение для локального/дев/stage тестирования:
   * Зафиксировать и согласовать Бизнес-сценарии
   * Подготовить тест-кейсы
      - если ТК "портит" данные, то должен быть инструмент, который "восстанавливает" испорченные данные или делает так, чтобы ТК можно было повторить на изначальных данных
      - если ТК технически "сложно" воспроизвести, то должна быть инструкция в СТ
   * Подготовить дев/stage стенды для проведения тестирования 
   * ![](resources/warning.svg "warning") Забронируйте stage для экспериментального тестирования своей story в порядке очереди.
   * ![](resources/warning.svg "warning") Забронируйте stage для нагрузочного тестирования, на котором необходимо провести НТ story.
   * Подготовить необходимые доступы
   * Подготовить тестовые учетные записи (для всех ролей)
   * Подготовить тестовые данные
   * Подготовить окружение для интеграционного тестирования с внешними компаниями (если есть):
      - Контакты и доступность QA с той стороны
      - Канал оперативной(!) коммуникации
      - Тестовые стенды с той стороны
      - Доступы на ту сторону
      - Тестовые учетные записи (для всех ролей) с той стороны
      - Тестовые данные с той стороны
      - Договориться о времени тестирования (и доступности системы/стенда с той стороны)
2. Если доработка технически сложная, то необходимо как можно раньше выйти на ИФТ/stage, чтобы 
   * поймать потенциальные проблемы как можно раньше 
   * заранее настроить стенд (интеграция, сквид, бд, роутинг и тд)
   * ![](resources/warning.svg "warning") Отдельно проверить скрипты корректировки прод дампа для stage
3. Создать и начать управление тест-планом
4. Провести анализ рисков и начать управление рисками

Разработка
-----------

   Отведите фича-ветку от релизной ветки, которая установлена в проде, в репозиториях back и front. Отведение от мастера допустимо только тогда, когда это имеет смысл.
   Продумать возможные изменения GQL схемы (или любых других интеграционных контрактов) и сделать это заранее, чтобы не блокировать разработку.
   Выполните разработку фичи в фича-ветке.
   Необходимо сохранять идемпотентное и обратносовместимое api.
   дополнительные требования/чеклист смотри тут:  EDU-46160 - Чек-лист технического решения OPEN
   продумать миграцию старых данных
   Задачи QA:
   ручные тест-кейсы
   актуализация РТМ
   управление рисками
   При разработке не забывайте писать тесты. Надо стараться автоматизировать все тест-кейсы. Как минимум - критичные тест-кейсы.
   юнит тесты
   интеграционные тесты
   апи тесты
   end-2-end тесты (Selenium, CodeсeptJS)
   нагрузочные тесты
   Установите артефакты, собранные из фича-ветки, на dev стенд.
   Проведите регрессионное автотестирование своей фичи на dev стенде.
   Проведите ручное тестирование своей фичи на dev стенде.
   Документирование
   Заведите задачу на обновление пользовательской документации (при необходимости).
   Обновите инструкции для поддержки (первая, вторая линия).
   Обновите карточки сервисов.
   Необходимо пройти Definition of Done (DoD).
   Провести внутреннее демо.
   Определить стенд.
   Задеплоить фичу.
   Набить данные.
   Подготовить сценарии демонстрации.
   Вспомнить критерии приёмки.
   Выбрать тех, кто проводит demo (аналитик) и фиксирует замечания (QA).
   Создайте ПР на мерж вашей фича-ветки в master (с целью получить лайки по МР/замержить в master). Перед этим подмержите целевую ветку в фича-ветку, чтобы избежать конфликтов.
   Если вы отводились от мастера, то черрипикните коммиты вашей фича-ветки в релизную ветку (например, r/37.0.0). При необходимости черрипикните коммиты в конфигурационном репозитории.
   Подготовьте SM для установки релиза в release notes.
   До наступления фича-фриза (ФФ) тикеты с типом Story должны быть переведены в статус IFT.
   Установите артефакты, собранные из релизной ветки с вашей фича-веткой на stage (в случае необходимости проверить работоспособность фичи до релиза). При необходимости отведите ветку в конфигурационном репозитории.
   Для настройки стейджа/прода, необходимо завести SM по правилам ?? Release 2.0 (например, https://jira.pcbltools.ru/jira/browse/SM-22153)
   Тестирование на стейдже:
   Интеграционно-Функциональное Тестирование (ИФТ);
   Нагрузочное Тестирование (НТ);
   КиберБезопасность (КБ);
   Интеграционное Тестирование с внешними компаниями (если есть).
   На этапах тестирования при обнаружении багов, заводятся тикеты в jira, для их исправления. По согласованию с PO/TL баги могут быть перенесены в следующие релизы. При этом необходимо заполнить поле "причина переноса" у дефектов.
   Хороший финал этапа разработки: Все доработки реализованы. DoD пройден. До ФФ задачи переведены в статус IFT.


Вывод доработки в ПРОМ среду
-----------
   До выхода в прод необходимо
   завести необходимые справочные и технические данные
   Вывод доработки в пром происходит вместе с релизом и выполняется релизной командой.
   Включить фича-флаг для новой фичи для отдельной школы и отдельных пользователей, которые проверяют функционал в prod.
   По согласованию с PO фича-флаг включается для всех.
   Необходимо провести информирование пользователей о новом функциоле
   провести обучение
   разместить баннер/бегущую строку
   PR
   другой канал информирования
   После выхода версии необходимо ее мониторить на предмет аномалий в графиках и ошибок
   После выхода версии необходимо собрать фидбек от пользователей
   При необходимости небольшие срочные доработки могут быть выведены в минорных релизах.
   Исправления дефектов (багов и инцидентов) могут быть выведены в пром в хотфиксах.
   Необходимо запланировать в будущие версии исправление всех оставшихся багов и техдолгов.


